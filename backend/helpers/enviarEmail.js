import nodemailer from "nodemailer";

const sendPasswordReset = async (email, username, token) => {
  try {
    const transporter = nodemailer.createTransport({
      host: "smtp.gmail.com",
      port: 587,
      auth: {
        user: process.env.EMAIL_USER,
        pass: process.env.EMAIL_PASSWORD,
      },
    });

    const mensaje = {
      from: process.env.EMAIL_USER,
      to: email,
      subject: "Solicitud para restablecer contraseña de Discord",
      html: `
      <div style="background:#f9f9f9">
      <div style="background-color:#f9f9f9">
      
    <div style="margin:0px auto;max-width:640px;background:transparent"><table role="presentation" cellpadding="0" cellspacing="0" style="font-size:0px;width:100%;background:transparent" align="center" border="0"><tbody><tr><td style="text-align:center;vertical-align:top;direction:ltr;font-size:0px;padding:40px 0px"><div aria-labelledby="mj-column-per-100" class="m_240869393166618600mj-column-per-100" style="vertical-align:top;display:inline-block;direction:ltr;font-size:13px;text-align:left;width:100%"><table role="presentation" cellpadding="0" cellspacing="0" width="100%" border="0"><tbody><tr><td style="word-break:break-word;font-size:0px;padding:0px" align="center"><table role="presentation" cellpadding="0" cellspacing="0" style="border-collapse:collapse;border-spacing:0px" align="center" border="0"><tbody><tr><td style="width:138px"><a href="https://click.discord.com/ls/click?upn=qDOo8cnwIoKzt0aLL1cBeARJoBrGSa2vu41A5vK-2B4ute1kWYI6zNuxQFCVciWW4KcS6s_K7sGtu5s2k0N4epK259GrcBnScA84rRkJHtwqCi4EKuj2LRo14lxYCvd2sjnrkuqrErPjFcYb61RFJDMkrUJsJmAswCotpoNaWduTNEO4IHmB3MYxq31s5t6fr-2Fen56rySZ0f92c70soIjWW-2BB8Np1w5rWZrwNs6MfveCW0qYkJqCyxmaDYoibkkEf-2FRA9lwUce8DpubKHh-2FpKHQQXm-2BOPbCRuv0bflGcVRCcUJIGr9UTSV51X-2BX6lEiqxOP1OU3HQ2C-2FdM8o02b12d-2FuKfx6g-3D-3D" target="_blank" data-saferedirecturl="https://www.google.com/url?q=https://click.discord.com/ls/click?upn%3DqDOo8cnwIoKzt0aLL1cBeARJoBrGSa2vu41A5vK-2B4ute1kWYI6zNuxQFCVciWW4KcS6s_K7sGtu5s2k0N4epK259GrcBnScA84rRkJHtwqCi4EKuj2LRo14lxYCvd2sjnrkuqrErPjFcYb61RFJDMkrUJsJmAswCotpoNaWduTNEO4IHmB3MYxq31s5t6fr-2Fen56rySZ0f92c70soIjWW-2BB8Np1w5rWZrwNs6MfveCW0qYkJqCyxmaDYoibkkEf-2FRA9lwUce8DpubKHh-2FpKHQQXm-2BOPbCRuv0bflGcVRCcUJIGr9UTSV51X-2BX6lEiqxOP1OU3HQ2C-2FdM8o02b12d-2FuKfx6g-3D-3D&amp;source=gmail&amp;ust=1707418620013000&amp;usg=AOvVaw2XTH5qDaIpZuC8F1-N-Cn7"><img alt="" title="" height="38px" src="https://ci3.googleusercontent.com/meips/ADKq_Nb5ax2Dw95owSyduMse6gWIZx_i1EsIfAvUeqb5rU5YhlXMLMEF5TYL8ATNnfQWN2dfeUixF4dVM-Zzau2o464U42jc-z3wuxkkcAGDHa-7iiaImXcT5Z3Lp4a5k2ozTo8a=s0-d-e1-ft#https://cdn.discordapp.com/email_assets/592423b8aedd155170617c9ae736e6e7.png" width="138" class="CToWUd" data-bit="iit"></a></td></tr></tbody></table></td></tr></tbody></table></div></td></tr></tbody></table></div>
          <div style="max-width:640px;margin:0 auto;border-radius:4px;overflow:hidden"><div style="margin:0px auto;max-width:640px;background:#ffffff"><table role="presentation" cellpadding="0" cellspacing="0" style="font-size:0px;width:100%;background:#ffffff" align="center" border="0"><tbody><tr><td style="text-align:center;vertical-align:top;direction:ltr;font-size:0px;padding:40px 50px"><div aria-labelledby="mj-column-per-100" class="m_240869393166618600mj-column-per-100" style="vertical-align:top;display:inline-block;direction:ltr;font-size:13px;text-align:left;width:100%"><table role="presentation" cellpadding="0" cellspacing="0" width="100%" border="0"><tbody><tr><td style="word-break:break-word;font-size:0px;padding:0px" align="left"><div style="color:#737f8d;font-family:Helvetica Neue,Helvetica,Arial,Lucida Grande,sans-serif;font-size:16px;line-height:24px;text-align:left">
                
      <h2 style="font-family:Helvetica Neue,Helvetica,Arial,Lucida Grande,sans-serif;font-weight:500;font-size:20px;color:#4f545c;letter-spacing:0.27px">Hey ${username},</h2>
    <p>Your Discord password can be reset by clicking the button below. If you did not request a new password, please ignore this email.</p>
    
              </div></td></tr><tr><td style="word-break:break-word;font-size:0px;padding:10px 25px;padding-top:20px" align="center"><table role="presentation" cellpadding="0" cellspacing="0" style="border-collapse:separate" align="center" border="0"><tbody><tr><td style="border:none;border-radius:3px;color:white;padding:15px 19px" align="center" valign="middle" bgcolor="#5865f2"><a href="http://localhost:5173/resetpassword/${token}" style="text-decoration:none;line-height:100%;background:#5865f2;color:white;font-family:Ubuntu,Helvetica,Arial,sans-serif;font-size:15px;font-weight:normal;text-transform:none;margin:0px" target="_blank" data-saferedirecturl="https://www.google.com/url?q=https://click.discord.com/ls/click?upn%3DqDOo8cnwIoKzt0aLL1cBeL3qPo02hivCd4-2BrzJ3KTksHeDugGQEoT8HMCCK8FgXKLvvkG-2B6-2BqCbCZ3Th1BapO3SLyyXw1l1qJ1lvUG9sYkwFeNNEaXJxXtkhmw9ZWOKQIrWsPcvjaV6YUKesYZ991bZVWgbFj3lxkpMv3OCPaQFetxhio-2FFz8joC8Il1VzNTScqH5rmm6mVbeex6YOYQFA-3D-3DQUg8_K7sGtu5s2k0N4epK259GrcBnScA84rRkJHtwqCi4EKuj2LRo14lxYCvd2sjnrkuqrErPjFcYb61RFJDMkrUJsD3oEQLK8QxHPU-2F4t6deGFMc23L3lJw8zj9htRS03yXQ4dWi-2BXP5krvwbbnYge0jp1c9iecFzSol7sjfSRoERuV4K-2BDshgXZcmBtXhjNWhWQgnVwmkDcGA-2BscBN9dp8ZYIkjw17n5WkAkVwSmxP1i-2BrmB0gfkRYyDDA-2FFZOq7C9XEaQ4CmYhAJn-2FZjZzFHkuUg-3D-3D&amp;source=gmail&amp;ust=1707418620013000&amp;usg=AOvVaw3gEY4m4mu0BPtpXkqtHEjs">
                Reset Password
              </a></td></tr></tbody></table></td></tr><tr><td style="word-break:break-word;font-size:0px;padding:30px 0px"><p style="font-size:1px;margin:0px auto;border-top:1px solid #dcddde;width:100%"></p></td></tr><tr><td style="word-break:break-word;font-size:0px;padding:0px" align="left"><div style="color:#747f8d;font-family:Helvetica Neue,Helvetica,Arial,Lucida Grande,sans-serif;font-size:13px;line-height:16px;text-align:left">
    <p>¿Necesitas ayuda? <a href="https://click.discord.com/ls/click?upn=qDOo8cnwIoKzt0aLL1cBeNlOcN7VC1Mue2BSa5oqYEdKm-2BPBEvWHLEUfi61TfqfxuvBipSaAkPtkAVPOEnBIzw-3D-3De4oI_K7sGtu5s2k0N4epK259GrcBnScA84rRkJHtwqCi4EKuj2LRo14lxYCvd2sjnrkuqrErPjFcYb61RFJDMkrUJsOr7G9hdLAuHvMF69OgEcrEuYbfxMJFEqxnThuqBLBBKU0w5GZnPbrjcXNrgGOgSY0H-2FVGF8ORLT2Xw21WTNmP-2BmWUsFERXyf-2B-2FOGmW1b02WO-2FWoRvIGxnWLaEB2WraREaNQAjPrm2u-2FQ95huZ5Ym2mxgzZKNbFvB9yKJvSpsE9BCwa5Dm8pp0u-2BAJMpzMyMPQ-3D-3D" style="font-family:Helvetica Neue,Helvetica,Arial,Lucida Grande,sans-serif;color:#5865f2" target="_blank" data-saferedirecturl="https://www.google.com/url?q=https://click.discord.com/ls/click?upn%3DqDOo8cnwIoKzt0aLL1cBeNlOcN7VC1Mue2BSa5oqYEdKm-2BPBEvWHLEUfi61TfqfxuvBipSaAkPtkAVPOEnBIzw-3D-3De4oI_K7sGtu5s2k0N4epK259GrcBnScA84rRkJHtwqCi4EKuj2LRo14lxYCvd2sjnrkuqrErPjFcYb61RFJDMkrUJsOr7G9hdLAuHvMF69OgEcrEuYbfxMJFEqxnThuqBLBBKU0w5GZnPbrjcXNrgGOgSY0H-2FVGF8ORLT2Xw21WTNmP-2BmWUsFERXyf-2B-2FOGmW1b02WO-2FWoRvIGxnWLaEB2WraREaNQAjPrm2u-2FQ95huZ5Ym2mxgzZKNbFvB9yKJvSpsE9BCwa5Dm8pp0u-2BAJMpzMyMPQ-3D-3D&amp;source=gmail&amp;ust=1707418620013000&amp;usg=AOvVaw13kH3i_fJDoWnWAb7n--kd">Contacta con nuestro equipo de soporte técnico</a> o avísanos por Twitter <a href="https://click.discord.com/ls/click?upn=qDOo8cnwIoKzt0aLL1cBeHLasbud5D3vi74o1Q-2B2VLcLLCDOodJpEqop-2Fc-2F5Wr6Zwp85_K7sGtu5s2k0N4epK259GrcBnScA84rRkJHtwqCi4EKuj2LRo14lxYCvd2sjnrkuqrErPjFcYb61RFJDMkrUJsJV2IUfBfXW8J7oN-2Fo4Jy7WY-2F9BoDRBR-2BkAt9on7WtT0YT7mpKprokWjhCXu2d2kqimp9vH9hFZke0p4sTVMh4oV1mqmI1RpS56X8OUxbI2CCgLXHAdiBBlae0Gb4oKFvFsZdqhbUCehyVxJBtP4IkHX70z-2BOMWYyruqeKdNAdU5-2F-2FcIsZmzUVTbwI3eZ2nRWA-3D-3D" style="font-family:Helvetica Neue,Helvetica,Arial,Lucida Grande,sans-serif;color:#5865f2" target="_blank" data-saferedirecturl="https://www.google.com/url?q=https://click.discord.com/ls/click?upn%3DqDOo8cnwIoKzt0aLL1cBeHLasbud5D3vi74o1Q-2B2VLcLLCDOodJpEqop-2Fc-2F5Wr6Zwp85_K7sGtu5s2k0N4epK259GrcBnScA84rRkJHtwqCi4EKuj2LRo14lxYCvd2sjnrkuqrErPjFcYb61RFJDMkrUJsJV2IUfBfXW8J7oN-2Fo4Jy7WY-2F9BoDRBR-2BkAt9on7WtT0YT7mpKprokWjhCXu2d2kqimp9vH9hFZke0p4sTVMh4oV1mqmI1RpS56X8OUxbI2CCgLXHAdiBBlae0Gb4oKFvFsZdqhbUCehyVxJBtP4IkHX70z-2BOMWYyruqeKdNAdU5-2F-2FcIsZmzUVTbwI3eZ2nRWA-3D-3D&amp;source=gmail&amp;ust=1707418620013000&amp;usg=AOvVaw3tA8Ujoigkdf1NTMr_-S5z">@discord</a>.<br>
    ¿Quieres darnos tu opinión? ¡Dinos lo que piensas en nuestra <a href="https://click.discord.com/ls/click?upn=qDOo8cnwIoKzt0aLL1cBeGtifxhyb-2FEeTgeN31uAkBS2ZTvlNepPcLUnXgSC4-2BGKGMfo_K7sGtu5s2k0N4epK259GrcBnScA84rRkJHtwqCi4EKuj2LRo14lxYCvd2sjnrkuqrErPjFcYb61RFJDMkrUJsGt-2Fy04QPLfk7lvdvmZ-2FOoPEemIaKgIHlxy4om5exaoQjjzkUhro46IjHyFIEnpibCHKxAHQqnrGVHpUcxJ-2FgSMqsrAaW0CS4kcVA4x0XquI-2Fbe3TNMFfxJYXIUaN4p3e2bVxFEJLDCOX7kOvTw40e-2F6E2BHhKC-2B3dtzFMGU9ACHB4NAR0qn1bUi9czuaDPlpQ-3D-3D" style="font-family:Helvetica Neue,Helvetica,Arial,Lucida Grande,sans-serif;color:#5865f2" target="_blank" data-saferedirecturl="https://www.google.com/url?q=https://click.discord.com/ls/click?upn%3DqDOo8cnwIoKzt0aLL1cBeGtifxhyb-2FEeTgeN31uAkBS2ZTvlNepPcLUnXgSC4-2BGKGMfo_K7sGtu5s2k0N4epK259GrcBnScA84rRkJHtwqCi4EKuj2LRo14lxYCvd2sjnrkuqrErPjFcYb61RFJDMkrUJsGt-2Fy04QPLfk7lvdvmZ-2FOoPEemIaKgIHlxy4om5exaoQjjzkUhro46IjHyFIEnpibCHKxAHQqnrGVHpUcxJ-2FgSMqsrAaW0CS4kcVA4x0XquI-2Fbe3TNMFfxJYXIUaN4p3e2bVxFEJLDCOX7kOvTw40e-2F6E2BHhKC-2B3dtzFMGU9ACHB4NAR0qn1bUi9czuaDPlpQ-3D-3D&amp;source=gmail&amp;ust=1707418620013000&amp;usg=AOvVaw3JS-w7sRAWXXasyzlxBLiA">página de opiniones</a>.</p>
    
    </div></td></tr></tbody></table></div></td></tr></tbody></table></div>
          </div><div style="margin:0px auto;max-width:640px;background:transparent"><table role="presentation" cellpadding="0" cellspacing="0" style="font-size:0px;width:100%;background:transparent" align="center" border="0"><tbody><tr><td style="text-align:center;vertical-align:top;direction:ltr;font-size:0px;padding:20px 0px"><div aria-labelledby="mj-column-per-100" class="m_240869393166618600mj-column-per-100" style="vertical-align:top;display:inline-block;direction:ltr;font-size:13px;text-align:left;width:100%"><table role="presentation" cellpadding="0" cellspacing="0" width="100%" border="0"><tbody><tr><td style="word-break:break-word;font-size:0px;padding:0px" align="center"><div style="color:#99aab5;font-family:Helvetica Neue,Helvetica,Arial,Lucida Grande,sans-serif;font-size:12px;line-height:24px;text-align:center">
          Enviado por Discord •
          <a href="https://click.discord.com/ls/click?upn=qDOo8cnwIoKzt0aLL1cBeHN2Bg5UBi6nJegCqE7rzswec30BdfDZLIuq6fJ2wlEZYWWf_K7sGtu5s2k0N4epK259GrcBnScA84rRkJHtwqCi4EKuj2LRo14lxYCvd2sjnrkuqrErPjFcYb61RFJDMkrUJsN-2BSNTTp0-2Brlk8M6iOZfWlmyxsa7g4pxVld6OX6mFncaLp4pT3ipxMi8qsC9uBdwrGla7G1h6qo9O-2BiBTBr2rKlI4FHdpDANdBIFZNt9-2BwIzxe0H6D-2FWNdxsqh5d23gMmpV5YGRGYhm2rvQc-2FMoCpz1EoVchW5HO5olwuH9nGEPYogj-2FnG3MOnS7QuaoVtuNng-3D-3D" style="color:#1eb0f4;text-decoration:none" target="_blank" data-saferedirecturl="https://www.google.com/url?q=https://click.discord.com/ls/click?upn%3DqDOo8cnwIoKzt0aLL1cBeHN2Bg5UBi6nJegCqE7rzswec30BdfDZLIuq6fJ2wlEZYWWf_K7sGtu5s2k0N4epK259GrcBnScA84rRkJHtwqCi4EKuj2LRo14lxYCvd2sjnrkuqrErPjFcYb61RFJDMkrUJsN-2BSNTTp0-2Brlk8M6iOZfWlmyxsa7g4pxVld6OX6mFncaLp4pT3ipxMi8qsC9uBdwrGla7G1h6qo9O-2BiBTBr2rKlI4FHdpDANdBIFZNt9-2BwIzxe0H6D-2FWNdxsqh5d23gMmpV5YGRGYhm2rvQc-2FMoCpz1EoVchW5HO5olwuH9nGEPYogj-2FnG3MOnS7QuaoVtuNng-3D-3D&amp;source=gmail&amp;ust=1707418620013000&amp;usg=AOvVaw2TsnW7Q6xoNYJpssburWsn">Consulta nuestro blog</a>
          • <a href="https://click.discord.com/ls/click?upn=qDOo8cnwIoKzt0aLL1cBeHLasbud5D3vi74o1Q-2B2VLcLLCDOodJpEqop-2Fc-2F5Wr6Zdgey_K7sGtu5s2k0N4epK259GrcBnScA84rRkJHtwqCi4EKuj2LRo14lxYCvd2sjnrkuqrErPjFcYb61RFJDMkrUJsO2DU54LonvTJFw-2Fg-2BsemIaQhuIbauhufpY1zJ78iElxm0RVJ-2B91ld2Vn4ztUEoxDKWaV4r-2BKKMm7qwCrT93xqyQ3ZgCqHlxu-2BpvowYrImzEeLTiqiExfZuZv-2Bs-2F8kHOBmsBitCW8m43V-2Bk4zs9nkHXbGI-2B7iqo-2FMRKBhTTfaRahTjLKswloTd7pun7j8BrMAg-3D-3D" style="color:#1eb0f4;text-decoration:none" target="_blank" data-saferedirecturl="https://www.google.com/url?q=https://click.discord.com/ls/click?upn%3DqDOo8cnwIoKzt0aLL1cBeHLasbud5D3vi74o1Q-2B2VLcLLCDOodJpEqop-2Fc-2F5Wr6Zdgey_K7sGtu5s2k0N4epK259GrcBnScA84rRkJHtwqCi4EKuj2LRo14lxYCvd2sjnrkuqrErPjFcYb61RFJDMkrUJsO2DU54LonvTJFw-2Fg-2BsemIaQhuIbauhufpY1zJ78iElxm0RVJ-2B91ld2Vn4ztUEoxDKWaV4r-2BKKMm7qwCrT93xqyQ3ZgCqHlxu-2BpvowYrImzEeLTiqiExfZuZv-2Bs-2F8kHOBmsBitCW8m43V-2Bk4zs9nkHXbGI-2B7iqo-2FMRKBhTTfaRahTjLKswloTd7pun7j8BrMAg-3D-3D&amp;source=gmail&amp;ust=1707418620013000&amp;usg=AOvVaw0Nwp-lkfM1bz0_XhPWgzcy">@discord</a>
        </div></td></tr><tr><td style="word-break:break-word;font-size:0px;padding:0px" align="center"><div style="color:#99aab5;font-family:Helvetica Neue,Helvetica,Arial,Lucida Grande,sans-serif;font-size:12px;line-height:24px;text-align:center">
          444 De Haro Street, Suite 200, San Francisco, CA 94107
        </div></td></tr><tr><td style="word-break:break-word;font-size:0px;padding:0px" align="left"><div style="color:#000000;font-family:Helvetica Neue,Helvetica,Arial,Lucida Grande,sans-serif;font-size:13px;line-height:22px;text-align:left">
          <img src="https://ci3.googleusercontent.com/meips/ADKq_NaC9oi7DRzModSi-SayM9PJ-Vs0fs5wtEFp26o7W05_HoATGnLd8aJmvNIQGVGtXrm8dtV9Z36nmYUC40gNySUNGT4RXo9W6Kbty85wr080ETltR5HTmaasUSSJGcKdDiUHOHnO2z6p51q_54kGd443nP-dWRKNQGtnJ6mXdm9NCVawuSAGFIS0zZTeUBDqT7sgOELlBAgzZywBFJ-X1TKFwjxTbjEzFSmAyk2_5sRCnQ-ETjQBXkX4zQ=s0-d-e1-ft#https://discord.com/api/science/472894102795452451/ac0e9c86-6a14-4f83-a256-12c12a779bdf.gif?properties=eyJlbWFpbF90eXBlIjogInVzZXJfcGFzc3dvcmRfcmVzZXRfcmVxdWVzdCJ9" width="1" height="1" class="CToWUd" data-bit="iit">
        </div></td></tr></tbody></table></div></td></tr></tbody></table></div></div>
    <img src="https://ci3.googleusercontent.com/meips/ADKq_NY7vTChFjmVg2geUbgCxz9eCbHYmc1m9eJ69Kry8cey49va5SpRuvtZpoGhS-rcKp_aX3kFhW4hfgwd_3QDuYS-hel8MlZvxL_aJ4XN9BRdcfocR9pE_D84u0XWWhxumWUMsvYOdt6iWWujiB94T0gFDh3Au-Bm1OLtByBz3Qmf4oOFUEd9XnSyB708PVG3ZNnNoIQK71X-cUyuEc_zFHCrqL1DKsq1LviXMxwl1Gc5_Lk8tHWYKAlIf8GKdwfLzd5OzOEX1JYx6VE_q9lzKQvBwzYHZhwyy0nyD3r8mN2f2NIRQyY_S-3N5af8Ww3IeZ0I8mRy1MqGe7MWJR6ndXRAi7XGNBiTwOQ_HiV6ygcf9hbjjPlFJoVFueELDUkss9LEi9cgjml_JvkheppdpbFP6A3bPK5yR4J0c1HOzPdJtABcUJ1C2KlBDPQS64piaVfJVb9M5xT3lGuK3kzvDwYrPgI_nk35sRlz8zYWvd-zwFVNhTDkXHk72Ertww=s0-d-e1-ft#https://click.discord.com/wf/open?upn=9m4Ezh7-2FewYx9G54V1DB1Bb7b7YkZNgsrcLiDtk0-2FYGZe0PObHqiJSUGt-2BQV2GCkotAHzi5LA-2FCZu-2BszIrLNMRXzlrxIXwbRBOFtkHqucXpz7ZrsiYGLkiW-2BDmZ2-2BlkYGpVWhIKVOqUPVWV30ha7wjZnxAg95leFIOUuEu-2B4XfWxIeDzF2PAukh1GNKJbwwqmZ3R6SbVB5IKb2zVbI029uabvbmwCy8PY6MmhWUH4ZphHWaJIONLm73HRwlam-2Be3kWetcOXYPst6mHS8WwS78AlvDxrIoxndSzIZ6bT94Rc-3D" alt="" width="1" height="1" border="0" style="height:1px!important;width:1px!important;border-width:0!important;margin-top:0!important;margin-bottom:0!important;margin-right:0!important;margin-left:0!important;padding-top:0!important;padding-bottom:0!important;padding-right:0!important;padding-left:0!important" class="CToWUd" data-bit="iit" jslog="138226; u014N:xr6bB; 53:WzAsMl0."></div>
        `,
    };

    const info = await transporter.sendMail(mensaje);
    if (info) {
      console.log(info);
      return true;
    }
  } catch (error) {
    console.error("Error al enviar el correo:", error);
  }
};

export { sendPasswordReset };
